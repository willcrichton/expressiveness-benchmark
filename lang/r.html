<!DOCTYPE html><html><head><meta charSet="utf-8"/><title>Expressiveness Benchmark</title><meta name="viewport" content="initial-scale=1.0, width=device-width"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-16662292-3"></script><script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag(&#x27;js&#x27;, new Date());

        gtag(&#x27;config&#x27;, &#x27;UA-16662292-3&#x27;);
        </script><meta name="next-head-count" content="5"/><link rel="preload" href="/expressiveness-benchmark/_next/static/css/bb7eb15fa0f289a0fe43.css" as="style"/><link rel="stylesheet" href="/expressiveness-benchmark/_next/static/css/bb7eb15fa0f289a0fe43.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/expressiveness-benchmark/_next/static/chunks/main-f76717e2d376ecc40880.js" as="script"/><link rel="preload" href="/expressiveness-benchmark/_next/static/chunks/webpack-95c2b224bccf352ee870.js" as="script"/><link rel="preload" href="/expressiveness-benchmark/_next/static/chunks/framework.be9133c4aa54b58ca1d2.js" as="script"/><link rel="preload" href="/expressiveness-benchmark/_next/static/chunks/commons.2ac40408ef03d6c65327.js" as="script"/><link rel="preload" href="/expressiveness-benchmark/_next/static/chunks/pages/_app-73083bb29ec45f84b02a.js" as="script"/><link rel="preload" href="/expressiveness-benchmark/_next/static/chunks/48fe5443.8cbf9bb7b72041d99e6c.js" as="script"/><link rel="preload" href="/expressiveness-benchmark/_next/static/chunks/29107295.0ba1e3749ecd6faab06a.js" as="script"/><link rel="preload" href="/expressiveness-benchmark/_next/static/chunks/f7f3ae4b7ca4f7fc373506a61db832ad86bd3f74.b80d2e737f6ef283cfb4.js" as="script"/><link rel="preload" href="/expressiveness-benchmark/_next/static/chunks/pages/lang/%5Bid%5D-e6258ee591b96865bd9a.js" as="script"/></head><body><div id="__next"><div id="container"><div class="title"><h1><a href="/expressiveness-benchmark">Expressiveness Benchmark</a></h1><nav><span class="desktop-inline"><a href="/expressiveness-benchmark">Task matrix</a></span><span class="mobile-inline"><a href="/expressiveness-benchmark">Benchmark</a></span><a href="/expressiveness-benchmark/analysis">Dataset analysis</a></nav></div><div class="pivot-view"><h2>Language<!-- -->: <!-- -->R - Tidyverse</h2><div class="column-container"><div class="main-content"><div class="main-scroll"><div class="program-row"><div class="program-container"><h3><a href="/expressiveness-benchmark/task/val.id">Continent with the highest average population</a></h3><div class="code-viewer"><div style="display:none"><div id="ace-editor" style="width:100%;height:161px"></div></div><pre style="width:100%;height:161px;line-height:1.3em">continent_by_population &lt;- function(countries) {
  countries %&gt;%
    group_by(continent) %&gt;%
    summarize(mean_pop = mean(population)) %&gt;%
    slice(which.max(mean_pop)) %&gt;%
    .$continent
}</pre></div></div><div class="program-container"><h3><a href="/expressiveness-benchmark/task/val.id">First element that doesn&#x27;t change mean</a></h3><div class="code-viewer"><div style="display:none"><div id="ace-editor" style="width:100%;height:230px"></div></div><pre style="width:100%;height:230px;line-height:1.3em">library(data.table)
changing_mean &lt;- function(vals) {
   global_mean &lt;- mean(vals$value)
   setDT(vals)[, 
     mean_change := abs(global_mean - mean(vals[id != .BY, value])), 
     by = id] %&gt;%
     filter(mean_change &lt; 0.1) %&gt;%
     slice(which.min(id)) %&gt;%
     pull(id)
}</pre></div></div></div><div class="program-row"><div class="program-container"><h3><a href="/expressiveness-benchmark/task/val.id">Median population for each continent</a></h3><div class="code-viewer"><div style="display:none"><div id="ace-editor" style="width:100%;height:115px"></div></div><pre style="width:100%;height:115px;line-height:1.3em">continent_median_population &lt;- function(countries) {
  countries %&gt;%
    group_by(continent) %&gt;%
    summarize(population = median(population))
}</pre></div></div><div class="program-container"><h3><a href="/expressiveness-benchmark/task/val.id">Youngest person over 35</a></h3><div class="code-viewer"><div style="display:none"><div id="ace-editor" style="width:100%;height:138px"></div></div><pre style="width:100%;height:138px;line-height:1.3em">youngest_over_35 &lt;- function(people) {
  people %&gt;%
    filter(age &gt; 35) %&gt;%
    slice(which.min(age)) %&gt;%
    pull(name)
}</pre></div></div></div><div class="program-row"><div class="program-container"><h3><a href="/expressiveness-benchmark/task/val.id">Directors of movies Tom Hanks starred in</a></h3><div class="code-viewer"><div style="display:none"><div id="ace-editor" style="width:100%;height:138px"></div></div><pre style="width:100%;height:138px;line-height:1.3em">tom_hanks &lt;- function(actors, directors) {
  actors %&gt;%
    filter(actor == &quot;Tom Hanks&quot;) %&gt;%
    inner_join(directors, by = &quot;movie&quot;) %&gt;%
    pull(director)
}</pre></div></div><div class="program-container"><h3><a href="/expressiveness-benchmark/task/val.id">Row per family to row per child</a></h3><div class="code-viewer"><div style="display:none"><div id="ace-editor" style="width:100%;height:184px"></div></div><pre style="width:100%;height:184px;line-height:1.3em">row_per_child &lt;- function(families) {
  families %&gt;%
    pivot_longer(
      !family,
      names_to = c(&quot;.value&quot;, &quot;child&quot;),
      names_sep = &quot;_&quot;,
    )
}</pre></div></div></div><div class="program-row"><div class="program-container"><h3><a href="/expressiveness-benchmark/task/val.id">Convert strings with different formats to numbers</a></h3><div class="code-viewer"><div style="display:none"><div id="ace-editor" style="width:100%;height:138px"></div></div><pre style="width:100%;height:138px;line-height:1.3em">strings_to_numbers &lt;- function(numbers) {
  numbers %&gt;%
    mutate(output = as.numeric(str_replace_all(
      value, ifelse(format == &quot;comma_sep&quot;, &quot;,&quot;, &quot;_&quot;), &quot;&quot;))) %&gt;%
    pull(output)
}</pre></div></div><div class="program-container"><h3><a href="/expressiveness-benchmark/task/val.id">Documents with infrequent words</a></h3><div class="code-viewer"><div style="display:none"><div id="ace-editor" style="width:100%;height:253px"></div></div><pre style="width:100%;height:253px;line-height:1.3em">documents_with_infrequent_words &lt;- function(documents) {
  split &lt;- documents %&gt;%
    mutate(word = str_split(text, &quot; &quot;)) %&gt;%
    unnest()
  freq &lt;- split %&gt;% count(word)
  unique_words &lt;- freq %&gt;% filter(n == 1)
  split %&gt;% 
    filter(word %in% unique_words$word) %&gt;%
    pull(id) %&gt;%
    unique()
}</pre></div></div></div><div class="program-row"><div class="program-container"><h3><a href="/expressiveness-benchmark/task/val.id">Filter and clean tweets</a></h3><div class="code-viewer"><div style="display:none"><div id="ace-editor" style="width:100%;height:138px"></div></div><pre style="width:100%;height:138px;line-height:1.3em">process_tweets &lt;- function(data) {
  data %&gt;%
    filter(language == &quot;en&quot; &amp; is_retweet == &quot;false&quot;) %&gt;%
    mutate(body = tolower(body)) %&gt;%
    select(ts, body)
}</pre></div></div><div class="program-container"><h3><a href="/expressiveness-benchmark/task/val.id">People that purchased all possible items</a></h3><div class="code-viewer"><div style="display:none"><div id="ace-editor" style="width:100%;height:207px"></div></div><pre style="width:100%;height:207px;line-height:1.3em">purchased_all_food &lt;- function(food, orders) {
  n_food &lt;- count(food)    
  orders %&gt;%
    group_by(buyer) %&gt;%
    distinct(food) %&gt;%
    count() %&gt;%
    filter(n == n_food) %&gt;%
    pull(buyer)
}</pre></div></div></div><div class="program-row"><div class="program-container"><h3><a href="/expressiveness-benchmark/task/val.id">People who like a unique set of beer</a></h3><div class="code-viewer"><div style="display:none"><div id="ace-editor" style="width:100%;height:184px"></div></div><pre style="width:100%;height:184px;line-height:1.3em">unique_beer_drinkers &lt;- function(likes) {
  likes %&gt;%
    group_by(name) %&gt;%
    summarize(beer_set = list(sort(unique(beer)))) %&gt;%
    add_count(beer_set, name = &#x27;num_people_likes&#x27;) %&gt;%
    filter(num_people_likes == 1) %&gt;%
    pull(name)
}</pre></div></div><div class="program-container"><h3><a href="/expressiveness-benchmark/task/val.id">Rolling average</a></h3><div class="code-viewer"><div style="display:none"><div id="ace-editor" style="width:100%;height:138px"></div></div><pre style="width:100%;height:138px;line-height:1.3em">library(slider)
rolling_average &lt;- function(data) {
  data &lt;- arrange(data, time)
  avgs &lt;- unlist(slide_index(data$x, data$time, ~ mean(.x), .before = 6))
  data %&gt;% mutate(end_time = time, average = avgs) %&gt;% select(end_time, average)
}</pre></div></div></div><div class="program-row"><div class="program-container"><h3><a href="/expressiveness-benchmark/task/val.id">Windowed average</a></h3><div class="code-viewer"><div style="display:none"><div id="ace-editor" style="width:100%;height:138px"></div></div><pre style="width:100%;height:138px;line-height:1.3em">average_window &lt;- function(data) {
  data %&gt;% 
    group_by(floor(time / 7)) %&gt;% 
    summarize(avg = mean(x)) %&gt;% 
    pull(avg)
}</pre></div></div></div></div></div><div class="sidebar"><div class="sidebar-sticky"><div class="minimap"><button class="toggle">Toggle All</button><div><input type="checkbox" checked=""/>Continent with the highest average population</div><div><input type="checkbox" checked=""/>First element that doesn&#x27;t change mean</div><div><input type="checkbox" checked=""/>Median population for each continent</div><div><input type="checkbox" checked=""/>Youngest person over 35</div><div><input type="checkbox" checked=""/>Directors of movies Tom Hanks starred in</div><div><input type="checkbox" checked=""/>Row per family to row per child</div><div><input type="checkbox" checked=""/>Convert strings with different formats to numbers</div><div><input type="checkbox" checked=""/>Documents with infrequent words</div><div><input type="checkbox" checked=""/>Filter and clean tweets</div><div><input type="checkbox" checked=""/>People that purchased all possible items</div><div><input type="checkbox" checked=""/>People who like a unique set of beer</div><div><input type="checkbox" checked=""/>Rolling average</div><div><input type="checkbox" checked=""/>Windowed average</div></div></div></div></div></div><footer>Project by <a href="https://twitter.com/wcrichton">Will Crichton</a>, <a href="https://github.com/kovach">Scott Kovach</a>, and <a href="http://gleb.fyi/">Gleb Shevchuk</a>.</footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"lang":{"id":"r","name":"R - Tidyverse"}},"__N_SSG":true},"page":"/lang/[id]","query":{"id":"r"},"buildId":"c8EZ7BhbZZdR-rYM-JiEn","assetPrefix":"/expressiveness-benchmark","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/expressiveness-benchmark/_next/static/chunks/polyfills-d2769c16f665abc9d1ae.js"></script><script src="/expressiveness-benchmark/_next/static/chunks/main-f76717e2d376ecc40880.js" async=""></script><script src="/expressiveness-benchmark/_next/static/chunks/webpack-95c2b224bccf352ee870.js" async=""></script><script src="/expressiveness-benchmark/_next/static/chunks/framework.be9133c4aa54b58ca1d2.js" async=""></script><script src="/expressiveness-benchmark/_next/static/chunks/commons.2ac40408ef03d6c65327.js" async=""></script><script src="/expressiveness-benchmark/_next/static/chunks/pages/_app-73083bb29ec45f84b02a.js" async=""></script><script src="/expressiveness-benchmark/_next/static/chunks/48fe5443.8cbf9bb7b72041d99e6c.js" async=""></script><script src="/expressiveness-benchmark/_next/static/chunks/29107295.0ba1e3749ecd6faab06a.js" async=""></script><script src="/expressiveness-benchmark/_next/static/chunks/f7f3ae4b7ca4f7fc373506a61db832ad86bd3f74.b80d2e737f6ef283cfb4.js" async=""></script><script src="/expressiveness-benchmark/_next/static/chunks/pages/lang/%5Bid%5D-e6258ee591b96865bd9a.js" async=""></script><script src="/expressiveness-benchmark/_next/static/c8EZ7BhbZZdR-rYM-JiEn/_buildManifest.js" async=""></script><script src="/expressiveness-benchmark/_next/static/c8EZ7BhbZZdR-rYM-JiEn/_ssgManifest.js" async=""></script></body></html>